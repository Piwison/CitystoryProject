# C:\Users\egg03\Project\pytest.ini
[pytest]
# This line is crucial for pytest-django to load your Django settings.
# Ensure 'citystory_backend.settings' is the correct path to your settings file
# relative to your project root.
DJANGO_SETTINGS_MODULE = citystory_backend.settings

# Explicitly load the pytest-django plugin.
# This ensures that Django's environment is set up correctly before tests run.
plugins = pytest_django

# Define where pytest should look for test files.
# This will find files like `core/tests/test_auth.py`, `core/tests/test_models.py`, etc.
python_files = tests.py test_*.py *_tests.py

# Add common pytest options:
# -ra: show extra test summary info for all tests
# --maxfail=3: stop after 3 failures
# --disable-warnings: hide Python warnings
# -v: verbose output (shows each test name)
# --strict-markers: ensures all used pytest.mark markers are registered
addopts = -ra --maxfail=3 --disable-warnings -v --strict-markers

# Directories to ignore during test discovery (improves performance):
# Ensure 'venv' (your virtual environment) and '.git' are included.
# Add '.pytest_cache' as well.
norecursedirs = venv .git .pytest_cache node_modules